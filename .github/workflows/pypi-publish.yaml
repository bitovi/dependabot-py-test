name: Publish to PyPI

on:
  # push:
  #   tags:
  #     - 'v*'
  workflow_dispatch:

permissions: write-all

jobs:
    publish:
        runs-on: ubuntu-latest
        steps:

            - name: Checkout
              uses: actions/checkout@v4

            - name: publish-pypi
              uses: ./.github/actions/publish-pypi
              with:
                # github-token: ${{ github.token }}
                github-token: ${{ secrets.PYPI_GITHUB_TOKEN }}

                # TODO: this is only required if referencing a local action
                checkout: false
                pypi-github-org: bitovi
                pypi-github-repo: PyPI
                pypi-github-workflow-ref: initial-working